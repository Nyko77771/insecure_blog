{% extends "./partials/head.html" %}
{% block title %}Registration {% endblock %}
{% block content%}
    <div class="contentBox">
        <div class="middleBox">
            <h2>Create New Account</h2>

            <form method="POST" action="{{ url_for('register') }}" id="registerForm">
                <div class="formBox">
                    <label for="username">
                        Username
                        <button type="button" class="btnInfo" onclick="toggleHelp('usernameHelp')">&#8505;</button>
                    </label>
                    <input
                        type="text"
                        id="username"
                        name="username"
                        placeholder="Choose a username"
                        pattern="[a-zA-Z0-9_]+"
                        title="Only letters, numbers, and underscores allowed"
                        required>
                    <span id="usernameHelp" class="helpBox hidden">Only letters, numbers, and underscores</span>
                </div>
                <div class="formBox">
                    <label for="email">Email</label>
                    <input
                        type="email"
                        id="email"
                        name="email"
                        placeholder="your.email@example.com"
                        required>
                </div>


                <div class="formBox">
                    <label for="password">
                        Password
                        <button type="button" class="btnInfo" onclick="toggleHelp('passwordHelp')">&#8505;</button>
                    </label>
                    <input
                        type="password"
                        id="password"
                        name="password"
                        placeholder="Create a password"
                        minlength="16"
                        required>

                    <span class="revealPassBtn">
                        <label for="revealPass">
                            Show Password
                        </label>
                        <input
                        name="revealPass"
                        style="margin: 0; padding: 0" type="checkbox" onclick="revealPassword('password')">
                    </span>

                    <span id="passwordHelp" class="helpBox hidden">Must be at least 16 characters long</span>
                </div>

                <div class="formBox">
                    <label for="confirm_password">
                        Confirm Password
                        <button type="button" class="btnInfo" onclick="toggleHelp('confirmHelp')">&#8505;</button>
                    </label>
                    <input
                        type="password"
                        id="confirm_password"
                        name="confirm_password"
                        placeholder="Re-enter your password"
                        minlength="16"
                        required>

                    <span class="revealPassBtn">
                        <label for="revealPass">
                            Show Password
                        </label>
                        <input
                        name="revealPass"
                        style="margin: 0; padding: 0" type="checkbox" onclick="revealPassword('confirm_password')">
                    </span>

                    <span id="confirmHelp" class="helpBox hidden">Enter the same password to confirm</span>
                </div>
                <button type="submit" class="btnSubmit">Register</button>
            </form>
            <br>
            <p class="linkText">
                Already have an account? <a href="{{ url_for('index') }}">Login here</a>
            </p>
        </div>
    </div>


    <script>
        function toggleHelp(selected_type){
            const ibtn_element = document.getElementById(selected_type);
            if (ibtn_element.style.display === "none"){
                ibtn_element.style.display = "block"
            } else {
                ibtn_element.style.display = "none"
            }
        }
        function revealPassword(selected_type){
            const reveal_input = document.getElementById(selected_type)
            if(reveal_input.type == "password"){
                reveal_input.type = "text";
            } else {
                reveal_input.type = "password";
            }
        }
    </script>
{% endblock %}